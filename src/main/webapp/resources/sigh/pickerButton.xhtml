<ui:composition xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:cc="http://java.sun.com/jsf/composite"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:sigh="http://java.sun.com/jsf/composite/sigh">
	<cc:interface>
		<cc:attribute name="buttonAction" />
		<cc:attribute name="buttonRender" />
		<cc:attribute name="resultValue"
			default="#{cc.attrs.pickerField.formmatedSelectedOption}" />
		<cc:attribute name="panelId" default="#{cc.attrs.pickerField.id}" />
		<cc:attribute name="reRenderRegionId" default="" />
		<cc:attribute name="pickerField"
			type="py.una.med.base.dynamic.forms.PickerField" />
	</cc:interface>

	<cc:implementation>
		<h:inputHidden binding="#{cc.attrs.pickerField.hidden}"
			id="hiddenInput">
			<f:validator binding="#{cc.attrs.pickerField.validator}" />
		</h:inputHidden>
		<h:inputText id="valueId" value="#{cc.attrs.pickerField.code}"
			rendered="#{cc.attrs.pickerField.hasCodeInput}"
			disabled="empty cc.attrs.pickerField.keyListener">
			<a4j:ajax event="blur"
				listener="#{cc.attrs.pickerField.keyUpListener}"
				disabled="#{not cc.attrs.pickerField.hasCodeInput}"
				render="#{cc.attrs.panelId} #{cc.attrs.pickerField.idMessage} #{cc.attrs.reRenderRegionId}"
				execute="valueId" immediate="true" />
		</h:inputText>
		<a4j:commandButton disabled="#{cc.attrs.pickerField.buttonDisabled}"
			oncomplete="RichFaces.$('#{cc.attrs.pickerField.popUpClientID}').show(); return false;"
			render="#{cc.attrs.buttonRender}"
			value="#{msg['COMPONENT_PICKER_CHOOSE']}" immediate="true" />
		<h:outputLabel value="#{cc.attrs.resultValue}" />
		<h:panelGroup id="#{cc.attrs.panelId}">
			<h:outputLabel value="#{cc.attrs.resultValue}" />
			<rich:message for="hiddenInput" />
		</h:panelGroup>

	</cc:implementation>
</ui:composition>